df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt
dfm <- melt(df, id= "row")
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt
dfm <- melt(df, id= "row")
dfm
dfm %>%  view()
dfm %>%  View()
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
load("C:/Users/Mafer/Downloads/Archive/wide_religion.Rda")
wide_religion
raw <- read_csv(file = "Archive/raw.csv") %>% select(-X1)
library(readr)
raw <- read_csv(file = "Archive/raw.csv") %>% select(-X1)
setwd("C:/Users/Mafer/Downloads/Archive")
raw <- read_csv(file = "Archive/raw.csv") %>% select(-X1)
setwd("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4")
raw <- read_csv(file = "Archive/raw.csv") %>% select(-X1)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw %>%  View()
raw[mu] <- NULL
raw
raw$mu <- NULL
raw
raw <- melt(raw, id= "country")
raw
raw <- melt(raw, id= "country", "year")
raw <- melt(raw, id= "country", id="year")
raw
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt de reshape2
dfm <- melt(df, id= "row")
dfm %>%  View()
#gather de Tidyr
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw$mu <- NULL
raw
raw$fu <- NULL
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw %>%  View()
raw$mu <- NULL
raw$fu <- NULL
raw
raw <- melt(raw, id= "country", m014:f65)
raw <- melt(raw, id= "country", raw[m014:f65])
raw
raw <- gather(raw, key="country", value ="rango" , m014:f65)
raw
raw <- gather(raw, key="country", value ="freq" , m014:f65)
raw <- gather(raw, key="country", value ="freq" , m014:f65)
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt de reshape2
dfm <- melt(df, id= "row")
dfm %>%  View()
#gather de Tidyr
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw %>%  View()
raw$mu <- NULL
raw$fu <- NULL
raw
raw <- gather(raw, key="country", value ="freq" , m014:f65)
raw
library(readr)
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt de reshape2
dfm <- melt(df, id= "row")
dfm %>%  View()
#gather de Tidyr
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw %>%  View()
raw$mu <- NULL
raw$fu <- NULL
raw
raw <- gather(raw, key="column", value ="freq" , m014:f65)
raw
wide_religion
raw <- gather(raw, key="age", value ="freq" , m014:f65)
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt de reshape2
dfm <- melt(df, id= "row")
#gather de Tidyr
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw %>%  View()
raw$mu <- NULL
raw$fu <- NULL
raw
raw <- gather(raw, key="age", value ="freq" , m014:f65)
raw
raw <- gather(raw, key="age", value ="freq" , m014:f65) %>% arrange(country)
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt de reshape2
dfm <- melt(df, id= "row")
#gather de Tidyr
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw$mu <- NULL
raw$fu <- NULL
raw <- gather(raw, key="age", value ="freq" , m014:f65) %>% arrange(country)
raw
raw
raw
raw[rowSums(is.na(raw)) != ncol(raw),]
raw <- na.omit(raw)
raw
raw$sexo <- str_sub(raw$age, start = 1, end = 1)
raw
str_sub(raw$age, start=2)
raw$edad <- str_sub(raw$age, start=2)
raw
raw$edad <- factor(c(raw$edad))
raw$edad <- revalue(raw$edad, c(014 = "0-14", 1524 = "15-24"), 2534 = "25-34", 3544 = "35-44", 4554 = "45-54", 5564 = "55-64", 65 ="65+")
raw$edad <- revalue(raw$edad, c(014="0-14", 1524="15-24", 2534="25-34", 3544="35-44", 4554="45-54", 5564="55-64", 65="65+"))
?revalue
??revalue
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt de reshape2
dfm <- melt(df, id= "row")
#gather de Tidyr
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
library(plyr)
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw$mu <- NULL
raw$fu <- NULL
raw <- gather(raw, key="age", value ="freq" , m014:f65) %>% arrange(country)
#raw <- na.omit(raw)
raw
raw$sexo <- str_sub(raw$age, start = 1, end = 1)
raw$edad <- str_sub(raw$age, start=2)
raw$edad <- factor(c(raw$edad))
raw$edad <- revalue(raw$edad, c(014="0-14", 1524="15-24", 2534="25-34", 3544="35-44", 4554="45-54", 5564="55-64", 65="65+"))
#raw <- na.omit(raw)
raw
raw$sexo <- str_sub(raw$age, start = 1, end = 1)
raw$edad <- str_sub(raw$age, start=2)
raw
raw$edad <- factor(c(raw$edad))
raw
raw$edad <- revalue(raw$edad, c(014="0-14", 1524="15-24", 2534="25-34", 3544="35-44", 4554="45-54", 5564="55-64", 65="65+"))
raw$edad <- revalue(raw$edad, c(014 = "0-14", 1524 = "15-24", 2534 = "25-34", 3544 = "35-44", 4554 = "45-54", 5564 = "55-64", 65 = "65+"))
library(tidyr)
library(reshape2)
library(dplyr)
library(stringr)
df <- data.frame(row= LETTERS[1:3], a= 1:3, b= 4:6, c=7:9)
df
#melt de reshape2
dfm <- melt(df, id= "row")
#gather de Tidyr
dfg <- gather(df, key="variable", value= "value", a:c)
dfg
colnames(dfg) <- c("row", "letras", "valores")
dfg
library(plyr)
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw$mu <- NULL
raw$fu <- NULL
raw <- gather(raw, key="age", value ="freq" , m014:f65) %>% arrange(country)
#raw <- na.omit(raw)
raw
raw$sexo <- str_sub(raw$age, start = 1, end = 1)
raw$edad <- str_sub(raw$age, start=2)
raw
#raw$edad <- factor(c(raw$edad))
raw$edad <- revalue(raw$edad, c(014 = "0-14", 1524 = "15-24", 2534 = "25-34", 3544 = "35-44", 4554 = "45-54", 5564 = "55-64", 65 = "65+"))
#raw <- na.omit(raw)
raw
#raw$edad <- factor(c(raw$edad))
raw$edad <- revalue(raw$edad, c('014' = "0-14", '1524' = "15-24", '2534' = "25-34", '3544' = "35-44", '4554' = "45-54", '5564' = "55-64", '65' = "65+"))
raw
library(plyr)
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw$mu <- NULL
raw$fu <- NULL
raw <- gather(raw, key="age", value ="freq" , m014:f65) %>% arrange(country)
#raw <- na.omit(raw)
raw$sexo <- str_sub(raw$age, start = 1, end = 1)
raw$edad <- str_sub(raw$age, start=2)
raw$edad <- revalue(raw$edad, c('014' = "0-14", '1524' = "15-24", '2534' = "25-34", '3544' = "35-44", '4554' = "45-54", '5564' = "55-64", '65' = "65+"))
raw
raw1 <- raw %>% select(country, year, sexo, edad, freq)
raw
raw1
load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
wide_religion
religion <- gather(wide_religion, key="income", value ="freq")
religion
wide_religion
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused")
religion
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused") %>% arrange(religion)
religion
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused") %>% arrange(religion)
religion
setwd("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4")
load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
wide_religion <- load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
wide_religion <- load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused") %>% arrange(religion)
wide_religion <- load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused") %>% arrange(religion)
wide_religion
load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
wide_religion <- load(file = "wide_religion.Rda")
load("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4/wide_religion.Rda")
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused") %>% arrange(religion)
religion
setwd("C:/Users/Mafer/Desktop/GitHub/DataWranglingR/Laboratorio4")
load(file = "wide_religion.rda")
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused") %>% arrange(religion)
load(file = "wide_religion.rda")
religion <- gather(wide_religion, key="income", value ="freq", '<$10k':"Don't know/refused") %>% arrange(religion)
raw1(head)
library(plyr)
library(readr)
raw <- read_csv(file = "raw.csv") %>% select(-X1)
raw$mu <- NULL
raw$fu <- NULL
raw <- gather(raw, key="age", value ="freq" , m014:f65) %>% arrange(country)
#raw <- na.omit(raw)
raw$sexo <- str_sub(raw$age, start = 1, end = 1)
raw$edad <- str_sub(raw$age, start=2)
raw$edad <- revalue(raw$edad, c('014' = "0-14", '1524' = "15-24", '2534' = "25-34", '3544' = "35-44", '4554' = "45-54", '5564' = "55-64", '65' = "65+"))
raw1 <- raw %>% select(country, year, sexo, edad, freq)
raw1(head)
raw1 <- raw %>% select(country, year, sexo, edad, freq)
raw1(head)
head(raw1)
install.packages("nycflights13")
install.packages("lubridate")
library(nycflights13)
library(lubridate)
today
now()
today()
now()
date_string <- "1994 October 27th"
as.Date(date_string)
#FunciÃ³n de lubridate
ymd(date_string)
date0 <- '23/11/2018'
as.Date(date0)
as.Date(date0, format = "%d/%m/%Y")
dmy(date0)
date1 <- "1994-10-27 14:00:00UTC"
as.Date(date1, format ="%Y-%m-%d %H:%M:%S")
ydm_hms(date1)
date1 <- "1994-10-27 14:00:00UTC"
ydm_hms(date1)
date1 %>% class()
library(dplyr)
today()
date1 %>% class()
ydm_hms(date1)
date1 <- "1994-10-27 14:00:00UTC"
ydm_hms(date1)
flights %>% head()
as.Date(date1, format ="%Y-%m-%d %H:%M:%S")
ydm_hms(date1)
class(date1)
as.Date(date1, format ="%Y-%m-%d %H:%M:%S")
flights %>% head()
flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_date(year = year, month = month, day = date))
flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_datetime(year = year, month = month, day = day, hour = hour, min = minute))
flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_datetime(year = year, month = month,
day = day, hour = hour,
min = minute, tz = Japan))
flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_datetime(year = year, month = month,
day = day, hour = hour,
min = minute, tz = "Japan"))
flights %>% select(day) %>%
day(flights$day) %>%  mutate(freq = count(n))
flights %>% select(day) %>%
day(day) %>%  mutate(freq = count(n))
flights %>% select(day) %>% group_by(day(departure)) %>% summarise(n)
flights %>% select(day, departure) %>% group_by(day(departure)) %>% summarise(n)
flights %>% group_by(day(departure)) %>% summarise(n)
flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_datetime(year = year, month = month,
day = day, hour = hour,
min = minute, tz = "Japan"))
flights %>% group_by(day(departure)) %>% summarise(n)
flights0 <- flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_datetime(year = year, month = month,
day = day, hour = hour,
min = minute, tz = "Japan"))
flights0 %>% group_by(day(departure)) %>% summarise(n)
flights0 %>% group_by(day(departure)) %>% count()
flights0 %>%  mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% count()
flights0 %>%  mutate(weekday = wday(departure)) %>%
group_by(weekday) %>% count()
flights0 %>%  mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% summarise(count = n()) %>%  plot_ly(x= weekday, y=count, type = 'bar')
library("ggplot2", lib.loc="~/R/win-library/3.5")
install.packages("plotly")
flights0 %>%  mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% summarise(count = n()) %>%  plot_ly(x= weekday, y=count, type = 'bar')
library(lubridate)
date0 <- '23/11/2018'
as.Date(date0, format = "%d/%m/%Y")
date0 <-dmy(date0)
date1 <- '26-09-2019'
as.Date(date1, format = "%d-%m-%Y")
date1 <-dmy(date1)
date0 - date1
date1 - date0
difftime(time1 = date0, time2 = date1, units = 'days')
difftime(time1 = date0, time2 = date1, units = 'weeks')
difftime(time1 = date0, time2 = date1, units = 'secs')
lubridate::days(date1)
lubridate::days(date0-date1)
lubridate::ddays(14)
flights0 <- flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_datetime(year = year, month = month,
day = day, hour = hour,
min = minute))
library(dplyr)
flights0 <- flights %>%
select(year, month, day, hour, minute) %>%
mutate(departure= make_datetime(year = year, month = month,
day = day, hour = hour,
min = minute))
flights0 %>% group_by(day(departure)) %>% count()
flights0 %>% group_by(day(departure)) %>% count()
flights0 %>%  mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% summarise(count = n()) %>%  plot_ly(x= weekday, y=count, type = 'bar')
library(ggplot2)
flights0 %>%  mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% summarise(count = n()) %>%  plot_ly(x= weekday, y=count, type = 'bar')
library(plotly)
flights0 %>%  mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% summarise(count = n()) %>%  plot_ly(x= weekday, y=count, type = 'bar')
library(lubridate)
library(plotly)
flights0 %>%  mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% summarise(count = n()) %>%  plot_ly(x= weekday, y=count, type = 'bar')
flights0 %>%
mutate(weekday = wday(departure, label = T)) %>%
group_by(weekday) %>% summarise(count = n()) %>%  plot_ly(x= ~weekday, y=~count, type = 'bar')
begin <- c("May 11, 1996, 12:05", "September 12, 2001 1:00",
"July 1, 1988, 3:32")
end <- c("7/08/97 8:00", "10/23/02: 12:00", "1/4/91")
begin <- mdy_hm(begin)
end <- mdy_hm(end)
begin
end
end <- mdy_hm(end)
end <- c("7/08/97 8:00", "10/23/02: 12:00", "1/4/91 2:05")
begin <- mdy_hm(begin)
end
end <- mdy_hm(end)
end
OlsonNames()
begin <- mdy_hm(begin, tz = "US/Pacific")
end <- mdy_hm(end, tz = "US/Pacific")
begin <- c("May 11, 1996, 12:05", "September 12, 2001 1:00",
"July 1, 1988, 3:32")
end <- c("7/08/97 8:00", "10/23/02: 12:00", "1/4/91 2:05")
begin <- mdy_hm(begin, tz = "US/Pacific")
end <- mdy_hm(end, tz = "US/Pacific")
OlsonNames()
end
#OlsonNames()
begin %--% end
#OlsonNames()
begin %--% end %>% str()
time_interval <- begin %--% end
as.duration(tiem_interval)
as.duration(time_interval)
as.period(time_interval)
