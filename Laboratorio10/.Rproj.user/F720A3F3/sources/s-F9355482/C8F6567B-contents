---
title: "Lab10"
author: "Mafer Pérez"
date: "2 de noviembre de 2019"
output: rmarkdown::github_document
---

```{r}
library(readr)
library(dplyr)
movies <- read_csv(file = "C:/Users/Mafer/Desktop/DataW/movies.csv") %>% select(-X1)
ratings <- read_csv(file = "C:/Users/Mafer/Desktop/DataW/ratings.csv") %>% select(-X1)
```

```{r}
library(readr)
library(dplyr)
library(plotly)
library(DataExplorer)
ratings1 <- ratings %>%  group_by(movieId) %>%
  summarise(ratingsmean = mean(rating))

```

```{r}
plot_str(ratings1)
```

```{r}
introduce(ratings1) %>% View()
```

```{r}
movies %>% View()
glimpse(movies)
```

```{r}
plot_str(movies)
```

```{r}
introduce(movies) %>% View()
```

```{r}
colnames(ratings1)[colnames(ratings1)=="movieId"] <- "id"
```

```{r}
library(tidyverse)
movies <- as_tibble(movies)
ratings1 <- as_tibble(ratings1)
```

```{r}
datos <- left_join(movies, ratings1, by = "id")
colSums(is.na(datos))
```

```{r}
introduce(datos) %>% View()
```

```{r}
datos[datos == 0] <- NA
summary(datos)
```

```{r}
plot_missing(datos)
#La columna budget y revenue tienen muchos NA's por lo que sería mejor no tomarlas en cuenta para el análisis
```

```{r}
drops <- c("revenue","budget")
datos <- datos[ , !(names(datos) %in% drops)]
```

```{r}
plot_missing(datos)
```

```{r}
datos1 <- na.omit(datos) 
```

```{r}
summary(datos1)
```

```{r}
plot_correlation(datos1)
```

```{r}
plot_histogram(datos1)
```

```{r}
datos1 %>%  plot_ly(x = ~ratingsmean, y = ~popularity, type = "scatter")
```

```{r}
#Conclusiones
#Se hizo una media de los rating para cada id de la película y poder analizar mejor la data
#Se pueden botar las columnas de budget y revenue ya que tienen en su mayoría datos nulos.
#Con introduce se puede ver cuáles varibales son discretas o continuas
#Con glimpse podemos ver cuáles variables son categóricas o númericas
##Se borraron las filas que contienen NA en estas las columnas donde los missing values eran pocos
##Existe correlación entre vote count y popularity, ya que si era popular es posible que mucha gente lo viera. Las demas correlaciones no son significativas.

```

